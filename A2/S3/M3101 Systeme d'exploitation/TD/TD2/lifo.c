#include <stdlib.h>
#include <stdio.h>


typedef struct Element Element;
Element * Element_new(int value); 
typedef struct Stack Stack;
Stack * Stack_new(); 
void Stack_push(Stack *stk, int nb); 
int Stack_pop(Stack *stk, int* res_ptr); 
void Stack_print(Stack *stk);


struct Element {
	int data;
	Element *next;
};

// La structure de pile donne simplement le premier élément:
struct Stack {
	Element *head;
};


int main () {
  Stack *stack = Stack_new(); 
  Stack_push(stack, 4); 
  Stack_push(stack, 6); 
  //Stack_push(stack, 8); 
  //Stack_push(stack, 10);

  Stack_print(stack);
  /*
  printf("%d \n", stack->head->data); 
  
  int *res_ptr; 
  Stack_pop(stack, res_ptr); 
  printf("%d \n", *res_ptr);

  printf("%d \n", stack->head->data); 

  Stack_pop(stack, res_ptr); 
  printf("%d \n", stack->head->data); 
  */
	//printf("test\n");
}




// Voici une fonction qui permet de créer un élément:
Element * Element_new(int value) {
	Element * ptr = (Element *) malloc(sizeof(Element)); 
	ptr->data = value;
	return ptr;
}

// Et une fonction qui permet de créer une pile:
Stack * Stack_new() {
	Stack * ptr = (Stack *) malloc(sizeof(Stack)); 
  ptr->head = NULL;
  return ptr;
}

// Fonction pour insérer un élément dans la pile
void Stack_push(Stack *stk, int nb) {
  Element *elt = Element_new(nb);

  if (stk->head == NULL) {
    stk->head = elt; 
  }
  else {
    stk->head->next = elt; 
    stk->head = stk->head->next; 
  }
}


// Fonction retirer Element
int Stack_pop(Stack *stk, int* res_ptr) {
  if (stk->head == NULL)
    return -1; 

  *res_ptr = stk->head->data;
  stk->head = stk->head -1; 
  return 0; 
}


void Stack_print(Stack *stk) {
  Stack *courant = Stack_new(); 
  courant = stk; 
  int *res; 
  int x = Stack_pop(courant, res); 
  while (x != -1) {
    printf("%d \n", courant->head->data); 
    x = Stack_pop(courant, res);
    
  }
}














